{"version":3,"file":"bundle.7ca631396b557d85927c.js","mappings":"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","sources":["webpack://snake/./src/mainLoop.js","webpack://snake/./src/keyboard.js","webpack://snake/./src/gameObject.js","webpack://snake/./src/utils.js","webpack://snake/./src/gameMap.js","webpack://snake/./src/snake/constants.js","webpack://snake/./src/snake/snakeBody.js","webpack://snake/./src/snake/snakeHead.js","webpack://snake/./src/snake/snakeTail.js","webpack://snake/./src/event.js","webpack://snake/./src/snake/snake.js","webpack://snake/./src/food.js","webpack://snake/./src/priorityQueue.js","webpack://snake/./src/aStar.js","webpack://snake/./src/ai.js","webpack://snake/./src/index.js","webpack://snake/./src/renderer.js","webpack://snake/./src/resultText.js"],"sourcesContent":["const LOOP_STATUS = {\r\n  RUNNING: 0,\r\n  PAUSED: 1,\r\n  STOPPED: 2\r\n}\r\n\r\nexport class MainLoop {\r\n  loopStatus = LOOP_STATUS.PAUSED;\r\n\r\n  onLoop;\r\n\r\n  lastTimeStamp;\r\n\r\n  setOnLoop (onLoop) {\r\n    this.onLoop = onLoop\r\n  }\r\n\r\n  loop (timestamp) {\r\n    const elapsed = timestamp - this.lastTimeStamp\r\n    this.lastTimeStamp = timestamp\r\n    this.onLoop && this.onLoop(elapsed)\r\n    window.requestAnimationFrame(this.loop.bind(this))\r\n  }\r\n\r\n  start () {\r\n    if (this.loopStatus === LOOP_STATUS.PAUSED) {\r\n      this.loopStatus = LOOP_STATUS.RUNNING\r\n\r\n      this.lastTimeStamp = window.performance.now()\r\n      window.requestAnimationFrame(this.loop.bind(this))\r\n    }\r\n  }\r\n\r\n  pause () {\r\n    if (this.loopStatus === LOOP_STATUS.RUNNING) {\r\n      this.loopStatus = LOOP_STATUS.PAUSED\r\n    }\r\n  }\r\n\r\n  stop () {\r\n    if (this.loopStatus !== LOOP_STATUS.STOPPED) {\r\n      this.loopStatus = LOOP_STATUS.STOPPED\r\n    }\r\n  }\r\n}\r\n","const KEY_STATUS = {\r\n  PRESSED: 'pressed',\r\n  RELEASED: 'released'\r\n}\r\n\r\nconst keyStatus = {}\r\n\r\nwindow.addEventListener('keydown', (event) => {\r\n  const code = event.code\r\n  keyStatus[code] = KEY_STATUS.PRESSED\r\n})\r\n\r\nwindow.addEventListener('keyup', (event) => {\r\n  const code = event.code\r\n  keyStatus[code] = KEY_STATUS.RELEASED\r\n})\r\n\r\nexport class Keyboard {\r\n  static isPressed (key) {\r\n    return keyStatus[key] === KEY_STATUS.PRESSED\r\n  }\r\n\r\n  static isReleased (key) {\r\n    return keyStatus[key] === KEY_STATUS.RELEASED\r\n  }\r\n\r\n  constructor (key) {\r\n    this.key = key\r\n  }\r\n\r\n  isPressed () {\r\n    return Keyboard.isPressed(this.key)\r\n  }\r\n\r\n  isReleased () {\r\n    return Keyboard.isReleased(this.key)\r\n  }\r\n}\r\n","export class GameObject {\r\n  constructor (x, y) {\r\n    this.x = x\r\n    this.y = y\r\n    this.visible = true\r\n  }\r\n\r\n  update () {}\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  draw (renderer) {}\r\n}\r\n","export const getRandomInt = (min, max) => {\r\n  min = Math.ceil(min)\r\n  max = Math.floor(max)\r\n  return Math.floor(Math.random() * (max - min)) + min\r\n}\r\n\r\nexport const isTouchable = () => {\r\n  return 'ontouchstart' in window || navigator.maxTouchPoints\r\n}\r\n\r\n/** logic position to real position */\r\nexport const LP2RP = (x, y, pixelSize) => {\r\n  return {\r\n    x: x * pixelSize * 8,\r\n    y: y * pixelSize * 8\r\n  }\r\n}\r\n\r\nexport const shuffle = (arr) => {\r\n  for (let i = 0; i < arr.length; i++) {\r\n    const j = getRandomInt(0, arr.length);\r\n    [arr[i], arr[j]] = [arr[j], arr[i]]\r\n  }\r\n}\r\n","import { GameObject } from './gameObject.js'\r\nimport { getRandomInt, LP2RP } from './utils.js'\r\n\r\nconst COLORS = [\r\n  '',\r\n  '#23d57d', '#11804b', '#084b2a', '#8f4613',\r\n  '#cb651b', '#522a07', '#6e7679'\r\n]\r\n\r\nconst PIXEL_DATAS = {\r\n  TREE: [\r\n    [0, 0, 1, 1, 2, 2, 0, 0],\r\n    [0, 1, 2, 2, 2, 2, 2, 0],\r\n    [1, 2, 2, 2, 2, 2, 2, 2],\r\n    [0, 2, 2, 2, 2, 2, 2, 0],\r\n    [3, 3, 2, 3, 3, 2, 2, 3],\r\n    [0, 3, 3, 4, 4, 3, 3, 0],\r\n    [0, 0, 4, 4, 4, 4, 0, 0],\r\n    [0, 4, 4, 4, 4, 4, 4, 0]\r\n  ],\r\n  OAK: [\r\n    [0, 0, 5, 5, 5, 4, 0, 0],\r\n    [0, 5, 5, 4, 4, 4, 4, 0],\r\n    [0, 4, 4, 4, 4, 4, 4, 0],\r\n    [0, 4, 4, 4, 4, 4, 4, 0],\r\n    [0, 4, 4, 6, 6, 4, 6, 0],\r\n    [0, 0, 6, 7, 7, 6, 0, 0],\r\n    [0, 0, 0, 7, 7, 0, 0, 0],\r\n    [0, 0, 0, 7, 7, 0, 0, 0]\r\n  ]\r\n}\r\n\r\nexport class GameMap extends GameObject {\r\n  constructor (config) {\r\n    const {\r\n      x,\r\n      y,\r\n      rowNums,\r\n      colNums,\r\n      pixelSize\r\n    } = config\r\n    super(x, y)\r\n    this.rowNums = rowNums\r\n    this.colNums = colNums\r\n    this.pixelSize = pixelSize\r\n\r\n    this._treeTypeArr = Array(rowNums * 2 + colNums * 2 + 4)\r\n    for (let i = 0; i < this._treeTypeArr.length; i++) {\r\n      this._treeTypeArr[i] = ['TREE', 'OAK'][getRandomInt(0, 2)]\r\n    }\r\n  }\r\n\r\n  update () {}\r\n\r\n  draw (renderer) {\r\n    this._drawTrees(renderer)\r\n  }\r\n\r\n  _drawCell (renderer, x, y, type) {\r\n    const pixelData = PIXEL_DATAS[type]\r\n    const { pixelSize } = this\r\n    const { x: rx, y: ry } = LP2RP(x, y, pixelSize)\r\n    for (let r = 0; r < pixelData.length; r++) {\r\n      for (let c = 0; c < pixelData[r].length; c++) {\r\n        if (pixelData[r][c] !== 0) {\r\n          renderer.drawRect(\r\n            rx + c * pixelSize,\r\n            ry + r * pixelSize,\r\n            pixelSize,\r\n            pixelSize,\r\n            COLORS[pixelData[r][c]]\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _drawTrees (renderer) {\r\n    let typeIndex = 0\r\n    for (let r = 0; r < this.rowNums + 2; ++r) {\r\n      this._drawCell(renderer, 0, r, this._treeTypeArr[typeIndex++])\r\n      this._drawCell(renderer, this.colNums + 1, r, this._treeTypeArr[typeIndex++])\r\n    }\r\n    for (let c = 1; c <= this.colNums; ++c) {\r\n      this._drawCell(renderer, c, 0, this._treeTypeArr[typeIndex++])\r\n      this._drawCell(renderer, c, this.colNums + 1, this._treeTypeArr[typeIndex++])\r\n    }\r\n  }\r\n}\r\n","export const DIRECTION = {\r\n  UP: 1,\r\n  RIGHT: 2,\r\n  DOWN: 4,\r\n  LEFT: 8\r\n}\r\n\r\nexport const INVALID_DIRECTION = {\r\n  [DIRECTION.UP]: DIRECTION.DOWN,\r\n  [DIRECTION.RIGHT]: DIRECTION.LEFT,\r\n  [DIRECTION.DOWN]: DIRECTION.UP,\r\n  [DIRECTION.LEFT]: DIRECTION.RIGHT\r\n}\r\n\r\nexport const directionValues = {\r\n  [DIRECTION.UP]: [-1, 0],\r\n  [DIRECTION.RIGHT]: [0, 1],\r\n  [DIRECTION.DOWN]: [1, 0],\r\n  [DIRECTION.LEFT]: [0, -1]\r\n}\r\n","import { GameObject } from '../gameObject.js'\r\nimport { DIRECTION } from './constants.js'\r\nimport { LP2RP } from '../utils.js'\r\n\r\nconst HORIZONTAL_PIXEL_DATAS = [\r\n  [0, 0, 0, 0, 0, 0, 0, 0],\r\n  [0, 0, 0, 0, 0, 0, 0, 0],\r\n  [3, 3, 3, 3, 3, 3, 3, 3],\r\n  [3, 1, 1, 1, 3, 1, 1, 1],\r\n  [1, 1, 1, 3, 1, 1, 1, 3],\r\n  [3, 3, 3, 3, 3, 3, 3, 3],\r\n  [0, 0, 0, 0, 0, 0, 0, 0],\r\n  [0, 0, 0, 0, 0, 0, 0, 0]\r\n]\r\n\r\nconst VERTICAL_PIXEL_DATAS = [\r\n  [0, 0, 3, 3, 1, 3, 0, 0],\r\n  [0, 0, 3, 1, 1, 3, 0, 0],\r\n  [0, 0, 3, 1, 1, 3, 0, 0],\r\n  [0, 0, 3, 1, 3, 3, 0, 0],\r\n  [0, 0, 3, 3, 1, 3, 0, 0],\r\n  [0, 0, 3, 1, 1, 3, 0, 0],\r\n  [0, 0, 3, 1, 1, 3, 0, 0],\r\n  [0, 0, 3, 1, 3, 3, 0, 0]\r\n]\r\n\r\nexport class SnakeBody extends GameObject {\r\n  static TYPES = {\r\n    HORIZONTAL: 0,\r\n    VERTICAL: 1,\r\n    LEFTTOP: 2,\r\n    RIGHTTOP: 3,\r\n    LEFTBOTTOM: 4,\r\n    RIGHTBOTTOM: 5,\r\n    UP: 6,\r\n    RIGHT: 7,\r\n    DOWN: 8,\r\n    LEFT: 9\r\n  }\r\n\r\n  static ENDPOINT_TYPES = [\r\n    SnakeBody.TYPES.UP,\r\n    SnakeBody.TYPES.RIGHT,\r\n    SnakeBody.TYPES.DOWN,\r\n    SnakeBody.TYPES.LEFT\r\n  ]\r\n\r\n  static ENDPOINT_TYPES_TO_TYPES = {\r\n    [SnakeBody.TYPES.UP]: SnakeBody.TYPES.VERTICAL,\r\n    [SnakeBody.TYPES.RIGHT]: SnakeBody.TYPES.HORIZONTAL,\r\n    [SnakeBody.TYPES.DOWN]: SnakeBody.TYPES.VERTICAL,\r\n    [SnakeBody.TYPES.LEFT]: SnakeBody.TYPES.HORIZONTAL\r\n  }\r\n\r\n  static DIRECTION_TO_TYPE = {\r\n    ['' + DIRECTION.UP + DIRECTION.RIGHT]: SnakeBody.TYPES.LEFTTOP,\r\n    ['' + DIRECTION.UP + DIRECTION.LEFT]: SnakeBody.TYPES.RIGHTTOP,\r\n    ['' + DIRECTION.RIGHT + DIRECTION.DOWN]: SnakeBody.TYPES.RIGHTTOP,\r\n    ['' + DIRECTION.RIGHT + DIRECTION.UP]: SnakeBody.TYPES.RIGHTBOTTOM,\r\n    ['' + DIRECTION.DOWN + DIRECTION.LEFT]: SnakeBody.TYPES.RIGHTBOTTOM,\r\n    ['' + DIRECTION.DOWN + DIRECTION.RIGHT]: SnakeBody.TYPES.LEFTBOTTOM,\r\n    ['' + DIRECTION.LEFT + DIRECTION.UP]: SnakeBody.TYPES.LEFTBOTTOM,\r\n    ['' + DIRECTION.LEFT + DIRECTION.DOWN]: SnakeBody.TYPES.LEFTTOP\r\n  }\r\n\r\n  static COLORS = [\r\n    '',\r\n    'Green', 'Black', 'DarkGreen', 'Pink'\r\n  ];\r\n\r\n  static PIXEL_DATAS = {\r\n    [SnakeBody.TYPES.HORIZONTAL]: HORIZONTAL_PIXEL_DATAS,\r\n    [SnakeBody.TYPES.RIGHT]: HORIZONTAL_PIXEL_DATAS,\r\n    [SnakeBody.TYPES.LEFT]: HORIZONTAL_PIXEL_DATAS,\r\n    [SnakeBody.TYPES.VERTICAL]: VERTICAL_PIXEL_DATAS,\r\n    [SnakeBody.TYPES.UP]: VERTICAL_PIXEL_DATAS,\r\n    [SnakeBody.TYPES.DOWN]: VERTICAL_PIXEL_DATAS,\r\n    [SnakeBody.TYPES.LEFTTOP]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 3, 3, 3, 3],\r\n      [0, 0, 0, 3, 3, 1, 1, 1],\r\n      [0, 0, 3, 3, 1, 1, 1, 3],\r\n      [0, 0, 3, 1, 1, 1, 3, 3],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 3, 3, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.RIGHTTOP]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [3, 3, 3, 3, 0, 0, 0, 0],\r\n      [3, 1, 1, 1, 3, 0, 0, 0],\r\n      [1, 1, 1, 3, 1, 3, 0, 0],\r\n      [3, 3, 1, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 3, 3, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.LEFTBOTTOM]: [\r\n      [0, 0, 3, 3, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 1, 3, 3],\r\n      [0, 0, 3, 1, 3, 1, 1, 1],\r\n      [0, 0, 0, 3, 1, 1, 1, 3],\r\n      [0, 0, 0, 0, 3, 3, 3, 3],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.RIGHTBOTTOM]: [\r\n      [0, 0, 3, 3, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [3, 3, 1, 1, 1, 3, 0, 0],\r\n      [3, 1, 1, 1, 3, 3, 0, 0],\r\n      [1, 1, 1, 3, 3, 0, 0, 0],\r\n      [3, 3, 3, 3, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ]\r\n  }\r\n\r\n  constructor (x, y, pixelSize, type) {\r\n    super(x, y)\r\n    this.pixelSize = pixelSize\r\n    this.type = type || SnakeBody.TYPES.HORIZONTAL\r\n  }\r\n\r\n  update () {}\r\n\r\n  draw (renderer) {\r\n    const { pixelSize, type } = this\r\n    const { x, y } = LP2RP(this.x, this.y, pixelSize)\r\n    const pixelData = this._getPixelData(type)\r\n    for (let r = 0; r < pixelData.length; r++) {\r\n      for (let c = 0; c < pixelData[r].length; c++) {\r\n        if (pixelData[r][c] !== 0) {\r\n          renderer.drawRect(x + c * pixelSize, y + r * pixelSize, pixelSize, pixelSize, this._getColor(pixelData[r][c]))\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _getPixelData (type) {\r\n    return SnakeBody.PIXEL_DATAS[type]\r\n  }\r\n\r\n  _getColor (colorType) {\r\n    return SnakeBody.COLORS[colorType]\r\n  }\r\n}\r\n","import { SnakeBody } from './snakeBody.js'\r\nimport { DIRECTION } from './constants.js'\r\n\r\nexport class SnakeHead extends SnakeBody {\r\n  static DIRECTION_TO_TYPE = {\r\n    [DIRECTION.UP]: SnakeBody.TYPES.UP,\r\n    [DIRECTION.RIGHT]: SnakeBody.TYPES.RIGHT,\r\n    [DIRECTION.DOWN]: SnakeBody.TYPES.DOWN,\r\n    [DIRECTION.LEFT]: SnakeBody.TYPES.LEFT\r\n  }\r\n\r\n  static PIXEL_DATAS = {\r\n    [SnakeBody.TYPES.UP]: [\r\n      [0, 0, 0, 4, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 4, 0, 0, 0],\r\n      [0, 0, 0, 3, 3, 0, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 2, 1, 1, 2, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 3, 3, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.RIGHT]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [3, 3, 3, 3, 3, 0, 0, 0],\r\n      [3, 1, 1, 2, 1, 3, 0, 4],\r\n      [1, 1, 1, 1, 1, 3, 4, 0],\r\n      [3, 3, 3, 3, 3, 3, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.DOWN]: [\r\n      [0, 0, 3, 3, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 2, 1, 1, 2, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 0, 3, 3, 0, 0, 0],\r\n      [0, 0, 0, 4, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 4, 0, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.LEFT]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 3, 3, 3, 3, 3],\r\n      [4, 0, 3, 1, 2, 1, 1, 1],\r\n      [0, 4, 3, 1, 1, 1, 1, 3],\r\n      [0, 0, 3, 3, 3, 3, 3, 3],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ]\r\n  }\r\n\r\n  update () {}\r\n\r\n  draw (renderer) {\r\n    super.draw(renderer)\r\n  }\r\n\r\n  _getPixelData (type) {\r\n    return SnakeHead.PIXEL_DATAS[type]\r\n  }\r\n}\r\n","import { SnakeBody } from './snakeBody.js'\r\nimport { DIRECTION } from './constants.js'\r\n\r\nexport class SnakeTail extends SnakeBody {\r\n  static DIRECTION_TO_TYPE = {\r\n    [DIRECTION.UP]: SnakeBody.TYPES.UP,\r\n    [DIRECTION.RIGHT]: SnakeBody.TYPES.RIGHT,\r\n    [DIRECTION.DOWN]: SnakeBody.TYPES.DOWN,\r\n    [DIRECTION.LEFT]: SnakeBody.TYPES.LEFT\r\n  }\r\n\r\n  static PIXEL_DATAS = {\r\n    [SnakeBody.TYPES.UP]: [\r\n      [0, 0, 3, 3, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 3, 3, 3, 0, 0],\r\n      [0, 0, 0, 3, 3, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.RIGHT]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 3, 3, 3, 3, 3],\r\n      [0, 0, 3, 3, 1, 1, 1, 1],\r\n      [0, 0, 3, 3, 1, 1, 1, 3],\r\n      [0, 0, 0, 3, 3, 3, 3, 3],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.DOWN]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 3, 3, 0, 0, 0],\r\n      [0, 0, 3, 3, 3, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 1, 3, 0, 0],\r\n      [0, 0, 3, 1, 3, 3, 0, 0]\r\n    ],\r\n    [SnakeBody.TYPES.LEFT]: [\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [3, 3, 3, 3, 3, 0, 0, 0],\r\n      [3, 1, 1, 1, 3, 3, 0, 0],\r\n      [1, 1, 1, 1, 3, 3, 0, 0],\r\n      [3, 3, 3, 3, 3, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0],\r\n      [0, 0, 0, 0, 0, 0, 0, 0]\r\n    ]\r\n  }\r\n\r\n  update () {}\r\n\r\n  draw (renderer) {\r\n    super.draw(renderer)\r\n  }\r\n\r\n  _getPixelData (type) {\r\n    return SnakeTail.PIXEL_DATAS[type]\r\n  }\r\n}\r\n","export class EventEmitter {\r\n  events = {};\r\n\r\n  addEventListener (eventName, callback) {\r\n    if (!this.events[eventName]) {\r\n      this.events[eventName] = []\r\n    }\r\n    this.events[eventName].push(callback)\r\n  }\r\n\r\n  removeEventListener (eventName, callback) {\r\n    if (!this.events[eventName]) {\r\n      return\r\n    }\r\n    this.events[eventName] = this.events[eventName].filter(cb => cb !== callback)\r\n  }\r\n\r\n  on (eventName, callback) {\r\n    this.addEventListener(eventName, callback)\r\n  }\r\n\r\n  off (eventName, callback) {\r\n    this.removeEventListener(eventName, callback)\r\n  }\r\n\r\n  once (eventName, callback) {\r\n    const onceCallback = () => {\r\n      callback()\r\n      this.removeEventListener(eventName, onceCallback)\r\n    }\r\n    this.addEventListener(eventName, onceCallback)\r\n  }\r\n\r\n  emit (eventName, ...args) {\r\n    if (!this.events[eventName]) {\r\n      return\r\n    }\r\n    this.events[eventName].forEach(cb => cb(...args))\r\n  }\r\n}\r\n","import { GameObject } from '../gameObject.js'\r\nimport { SnakeHead } from './snakeHead.js'\r\nimport { SnakeBody } from './snakeBody.js'\r\nimport { SnakeTail } from './snakeTail.js'\r\nimport { EventEmitter } from '../event.js'\r\nimport { isTouchable } from '../utils.js'\r\nimport {\r\n  DIRECTION,\r\n  INVALID_DIRECTION,\r\n  directionValues\r\n} from './constants.js'\r\n\r\nconst MAX_SPEED = isTouchable() ? 3 : 5\r\nconst INIT_SPEED = 1\r\nconst AI_SPEED = 16\r\n\r\nclass ListNode {\r\n  constructor (value, prev, next) {\r\n    this.value = value\r\n    this.next = next || null\r\n    this.prev = prev || null\r\n  }\r\n}\r\n\r\nexport class Snake extends GameObject {\r\n  constructor (config) {\r\n    const { length, rowNums, colNums, pixelSize } = config\r\n\r\n    super(0, 0)\r\n\r\n    this.length = length\r\n    this.rowNums = rowNums\r\n    this.colNums = colNums\r\n    this.pixelSize = pixelSize\r\n\r\n    this.direction = DIRECTION.RIGHT\r\n    this.speed = INIT_SPEED\r\n\r\n    this.beforeMove = null\r\n\r\n    this.head = new ListNode(new SnakeHead(length, 1, pixelSize, SnakeHead.TYPES.RIGHT))\r\n    let tail = this.head\r\n    for (let i = 1; i < length - 1; i++) {\r\n      tail.next = new ListNode(new SnakeBody(length - i, 1, pixelSize, SnakeBody.TYPES.HORIZONTAL), tail)\r\n      tail = tail.next\r\n    }\r\n    tail.next = new ListNode(new SnakeTail(1, 1, pixelSize, SnakeTail.TYPES.RIGHT), tail)\r\n    tail = tail.next\r\n    this.tail = tail\r\n\r\n    this._elapsed = 0\r\n    this._canGrow = false\r\n    this._directionQueue = []\r\n    this._lastDirection = this.direction\r\n    this._eventEmitter = new EventEmitter()\r\n    this._dash = 0\r\n  }\r\n\r\n  update (elapsed) {\r\n    this._elapsed += elapsed\r\n    const aiSpeed = this.beforeMove ? AI_SPEED : 0\r\n    if (this._elapsed >= 1000 / (aiSpeed || this._dash || this.speed)) {\r\n      this._elapsed = 0\r\n      if (this.beforeMove) {\r\n        const isTailAccessible = !this._canGrow\r\n        this.direction = this.beforeMove({ isTailAccessible })\r\n      } else if (this._directionQueue.length > 0) {\r\n        this._lastDirection = this.direction\r\n        this.direction = this._directionQueue.shift()\r\n      }\r\n      if (this._canGrow) {\r\n        this._doGrow()\r\n        this._canGrow = false\r\n      } else {\r\n        this.move()\r\n      }\r\n    }\r\n  }\r\n\r\n  draw (renderer) {\r\n    for (let node = this.tail; node; node = node.prev) {\r\n      if (node.value.visible) {\r\n        node.value.draw(renderer)\r\n      }\r\n    }\r\n  }\r\n\r\n  move () {\r\n    for (let p = this.tail; p.prev; p = p.prev) {\r\n      p.value.x = p.prev.value.x\r\n      p.value.y = p.prev.value.y\r\n      if (SnakeBody.ENDPOINT_TYPES.includes(p.prev.value.type)) {\r\n        p.value.type = SnakeBody.ENDPOINT_TYPES_TO_TYPES[p.prev.value.type]\r\n      } else {\r\n        p.value.type = p.prev.value.type\r\n      }\r\n    }\r\n    this.tail.value.type = this._calcTailType()\r\n    const head = this.head\r\n    const direction = directionValues[this.direction]\r\n    head.value.x += direction[1]\r\n    head.value.y += direction[0]\r\n    head.value.type = SnakeHead.DIRECTION_TO_TYPE[this.direction]\r\n    if (this.direction !== this._lastDirection) {\r\n      head.value.type = SnakeHead.DIRECTION_TO_TYPE[this.direction]\r\n      head.next.value.type = SnakeBody.DIRECTION_TO_TYPE['' + this._lastDirection + this.direction]\r\n      this._lastDirection = this.direction\r\n    }\r\n  }\r\n\r\n  dash () {\r\n    this._dash = 10\r\n    setTimeout(() => {\r\n      this._dash = 0\r\n    }, 300)\r\n  }\r\n\r\n  _calcTailType () {\r\n    const tail = this.tail.value\r\n    const tailPrev = this.tail.prev.value\r\n    if (tail.x === tailPrev.x) {\r\n      return tail.y < tailPrev.y ? SnakeTail.TYPES.DOWN : SnakeTail.TYPES.UP\r\n    } else {\r\n      return tail.x < tailPrev.x ? SnakeTail.TYPES.RIGHT : SnakeTail.TYPES.LEFT\r\n    }\r\n  }\r\n\r\n  grow () {\r\n    this._canGrow = true\r\n  }\r\n\r\n  toString () {\r\n    let str = ''\r\n    for (let node = this.head; node; node = node.next) {\r\n      str += `[${node.value.x},${node.value.y},${node.value.type}] `\r\n    }\r\n    return str\r\n  }\r\n\r\n  _doGrow () {\r\n    const head = this.head\r\n    const node = new ListNode(new SnakeBody(head.value.x, head.value.y, this.pixelSize, head.value.type), head, head.next)\r\n    head.next.prev = node\r\n    head.next = node\r\n    this.length++\r\n    const direction = directionValues[this.direction]\r\n    head.value.x += direction[1]\r\n    head.value.y += direction[0]\r\n    if (this.direction !== this._lastDirection) {\r\n      head.value.type = SnakeHead.DIRECTION_TO_TYPE[this.direction]\r\n      head.next.value.type = SnakeBody.DIRECTION_TO_TYPE['' + this._lastDirection + this.direction]\r\n      this._lastDirection = this.direction\r\n    }\r\n\r\n    this._eventEmitter.emit('statusChanged', this.length, this.speed)\r\n  }\r\n\r\n  changeDirection (direction) {\r\n    if (this._directionQueue.length === 0) {\r\n      if (direction !== this.direction && INVALID_DIRECTION[direction] !== this.direction) {\r\n        this._directionQueue.push(direction)\r\n      }\r\n    } else {\r\n      const lastDirection = this._directionQueue[this._directionQueue.length - 1]\r\n      if (direction !== lastDirection && INVALID_DIRECTION[direction] !== lastDirection) {\r\n        this._directionQueue.push(direction)\r\n      }\r\n    }\r\n  }\r\n\r\n  speedUp () {\r\n    this.speed = Math.min(this.speed + 1, MAX_SPEED)\r\n\r\n    this._eventEmitter.emit('statusChanged', this.length, this.speed)\r\n  }\r\n\r\n  speedDown () {\r\n    this.speed = Math.max(this.speed - 1, 1)\r\n\r\n    this._eventEmitter.emit('statusChanged', this.length, this.speed)\r\n  }\r\n\r\n  isEat (food) {\r\n    const head = this.head\r\n    return head.value.x === food.x && head.value.y === food.y\r\n  }\r\n\r\n  isDead () {\r\n    const head = this.head\r\n    const { x: headX, y: headY } = head.value\r\n    if (headX < 1 || headX > this.colNums ||\r\n      headY < 1 || headY > this.rowNums) {\r\n      return true\r\n    }\r\n    for (let node = head.next; node; node = node.next) {\r\n      if (node.value.x === headX && node.value.y === headY) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  forEach (cb) {\r\n    for (let node = this.head; node; node = node.next) {\r\n      cb(node.value)\r\n    }\r\n  }\r\n\r\n  includes (x, y) {\r\n    for (let node = this.head; node; node = node.next) {\r\n      if (node.value.x === x && node.value.y === y) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  onStatusChanged (cb) {\r\n    this._eventEmitter.on('statusChanged', cb)\r\n  }\r\n\r\n  getHead () {\r\n    return this.head.value\r\n  }\r\n\r\n  getTail () {\r\n    return this.tail.value\r\n  }\r\n}\r\n","import { GameObject } from './gameObject.js'\r\nimport { LP2RP } from './utils.js'\r\n\r\nexport const TYPE = {\r\n  APPLE: 0,\r\n  CHERRY: 1,\r\n  BANANA: 2,\r\n  WATERMELON: 3\r\n}\r\n\r\nconst COLORS = [\r\n  '',\r\n  '#59b574', '#4e1413', '#832525', '#bc3532', '#e23f40', '#e78385',\r\n  '#fceaaa', '#f3de70', '#cf641e', '#f37a2a', '#8e4413'\r\n]\r\n\r\nconst PIXEL_DATAS = {\r\n  [TYPE.APPLE]: [\r\n    [0, 0, 0, 1, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 2, 0, 0, 0],\r\n    [0, 0, 3, 3, 2, 3, 0, 0],\r\n    [0, 3, 6, 6, 2, 4, 3, 0],\r\n    [0, 3, 5, 5, 5, 4, 3, 0],\r\n    [0, 3, 4, 4, 4, 4, 3, 0],\r\n    [0, 0, 3, 3, 3, 3, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0]\r\n  ],\r\n  [TYPE.CHERRY]: [\r\n    [0, 0, 0, 0, 1, 1, 1, 0],\r\n    [0, 0, 0, 0, 2, 1, 0, 1],\r\n    [0, 0, 0, 2, 0, 2, 0, 0],\r\n    [0, 0, 0, 2, 0, 4, 4, 0],\r\n    [0, 0, 3, 4, 3, 5, 6, 4],\r\n    [0, 3, 5, 6, 3, 5, 5, 4],\r\n    [0, 3, 5, 5, 3, 3, 3, 0],\r\n    [0, 0, 3, 3, 0, 0, 0, 0]\r\n  ],\r\n  [TYPE.BANANA]: [\r\n    [0, 0, 0, 11, 11, 11, 11, 11],\r\n    [0, 0, 0, 11, 7, 8, 8, 11],\r\n    [0, 0, 0, 0, 9, 8, 11, 0],\r\n    [0, 0, 0, 9, 8, 8, 10, 0],\r\n    [0, 0, 9, 8, 8, 8, 10, 0],\r\n    [9, 9, 8, 8, 7, 10, 0, 0],\r\n    [9, 8, 8, 7, 10, 0, 0, 0],\r\n    [0, 9, 9, 9, 0, 0, 0, 0]\r\n  ],\r\n  [TYPE.WATERMELON]: [\r\n    [0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 6, 4, 4, 2, 4, 4, 1],\r\n    [1, 2, 4, 4, 4, 4, 4, 1],\r\n    [1, 4, 4, 2, 4, 4, 2, 1],\r\n    [0, 1, 4, 4, 4, 4, 1, 0],\r\n    [0, 0, 1, 1, 1, 1, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0]\r\n  ]\r\n}\r\n\r\nexport class Food extends GameObject {\r\n  constructor (x, y, pixelSize, type) {\r\n    super(x, y)\r\n    this.pixelSize = pixelSize\r\n    this.type = type\r\n  }\r\n\r\n  update () {}\r\n\r\n  draw (renderer) {\r\n    const { pixelSize, type } = this\r\n    const pixelData = PIXEL_DATAS[type]\r\n    const { x, y } = LP2RP(this.x, this.y, pixelSize)\r\n    for (let r = 0; r < pixelData.length; r++) {\r\n      for (let c = 0; c < pixelData[r].length; c++) {\r\n        if (pixelData[r][c] !== 0) {\r\n          renderer.drawRect(\r\n            x + c * pixelSize,\r\n            y + r * pixelSize,\r\n            pixelSize,\r\n            pixelSize,\r\n            COLORS[pixelData[r][c]]\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","export class Item {\r\n  constructor (value, code) {\r\n    this.value = value\r\n    this.code = code\r\n  }\r\n}\r\n\r\nexport class PriorityQueue {\r\n  constructor (arr) {\r\n    this.heap = []\r\n    if (arr && arr.length) {\r\n      this._initHeap(arr)\r\n    }\r\n  }\r\n\r\n  enqueue (item) {\r\n    this.heap.push(item)\r\n    this.moveUp(this.heap.length - 1)\r\n  }\r\n\r\n  dequeue () {\r\n    const { heap } = this\r\n    const top = heap.shift()\r\n    if (!this.isEmpty()) {\r\n      const last = heap.pop()\r\n      heap.unshift(last)\r\n      this.moveDown(0)\r\n    }\r\n    return top\r\n  }\r\n\r\n  isEmpty () {\r\n    return this.heap.length === 0\r\n  }\r\n\r\n  top () {\r\n    return this.heap[0]\r\n  }\r\n\r\n  find (cb) {\r\n    const { heap } = this\r\n    for (let i = 0; i < heap.length; ++i) {\r\n      if (cb(heap[i])) {\r\n        return heap[i]\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  findIndex (cb) {\r\n    const { heap } = this\r\n    for (let i = 0; i < heap.length; ++i) {\r\n      if (cb(heap[i])) {\r\n        return i\r\n      }\r\n    }\r\n    return -1\r\n  }\r\n\r\n  toString () {\r\n    return this.heap.map(item => item.value).join(', ')\r\n  }\r\n\r\n  swap (i, j) {\r\n    const { heap } = this;\r\n    [heap[i], heap[j]] = [heap[j], heap[i]]\r\n  }\r\n\r\n  moveUp (index) {\r\n    const { heap } = this\r\n    while (index !== 0) {\r\n      const parent = Math.floor((index - 1) / 2)\r\n      if (heap[index].code < heap[parent].code) {\r\n        this.swap(parent, index)\r\n        index = parent\r\n      } else {\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  moveDown (index) {\r\n    const { heap } = this\r\n    const lastNoLeaf = Math.floor((heap.length - 2) / 2)\r\n    while (index <= lastNoLeaf) {\r\n      const left = heap[index * 2 + 1]\r\n      const right = heap[index * 2 + 2] || left\r\n      const max = left.code <= right.code ? left : right\r\n      const maxIndex = left.code <= right.code ? index * 2 + 1 : index * 2 + 2\r\n      if (max.code < heap[index].code) {\r\n        this.swap(maxIndex, index)\r\n        index = maxIndex\r\n      } else {\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  _initHeap (arr) {\r\n    const { heap } = this\r\n    heap.push(arr[0])\r\n    for (let i = 1; i < arr.length; ++i) {\r\n      heap.unshift(arr[i])\r\n      this.moveDown(0)\r\n    }\r\n  }\r\n}\r\n","import { Item, PriorityQueue } from './priorityQueue.js'\r\n\r\nconst getManhattanDistance = (x1, y1, x2, y2) => {\r\n  return Math.abs(x1 - x2) + Math.abs(y1 - y2)\r\n}\r\n\r\n/** heuristic method */\r\nconst h = (x1, y1, x2, y2) => {\r\n  let v = 4 * getManhattanDistance(x1, y1, x2, y2)\r\n  v *= (1.0 + 0.001)\r\n  return v\r\n}\r\n\r\n/**\r\n * get f value of current position\r\n * @param {number} sx - start x\r\n * @param {number} sy - start y\r\n * @param {number} cx - current x\r\n * @param {number} xy - current y\r\n * @param {number} tx - target x\r\n * @param {number} ty - target y\r\n * @returns number\r\n */\r\nconst f = (sx, sy, cx, cy, tx, ty) => {\r\n  const g = h(sx, sy, cx, cy)\r\n  const hValue = h(cx, cy, tx, ty)\r\n  const fValue = g + hValue\r\n  return {\r\n    g,\r\n    h: hValue,\r\n    f: fValue\r\n  }\r\n}\r\n\r\nconst _createItem = (sx, sy, cx, cy, tx, ty) => {\r\n  const { g, h, f: fValue } = f(sx, sy, cx, cy, tx, ty)\r\n  return new Item({ x: cx, y: cy, g, h, f: fValue, parent: null }, fValue)\r\n}\r\n\r\n/** direction, [y, x][], up, right, down, left */\r\nconst _dir = [[-1, 0], [0, 1], [1, 0], [0, -1]]\r\n\r\nconst _getNeighbors = (x, y, grid, close) => {\r\n  const neighbors = _dir.map(([yOffset, xOffset]) => ({ x: x + xOffset, y: y + yOffset }))\r\n  return neighbors.filter(({ x, y }) => {\r\n    return x >= 0 && y >= 0 && x < grid.length && y < grid[0].length && grid[y][x] === 0 && !close.has('' + x + y)\r\n  })\r\n}\r\n\r\n/** transform link list of item to array */\r\nconst _itemLinkToPath = (item) => {\r\n  const path = []\r\n  for (let p = item; p; p = p.parent) {\r\n    path.unshift({ x: p.x, y: p.y })\r\n  }\r\n  return path\r\n}\r\n\r\n/**\r\n * A star algorithm\r\n * @param {number} x1 - start x\r\n * @param {number} y1 - start y\r\n * @param {number} x2 - target x\r\n * @param {number} y2 - target y\r\n * @param {number[][]} grid - grid, 0: accessible, 1: not accessible\r\n * @returns {{x: number, y: number}[]} - path, {x, y}[]\r\n */\r\nexport const search = (x1, y1, x2, y2, grid) => {\r\n  const open = new PriorityQueue()\r\n  const close = new Set()\r\n  const start = _createItem(x1, y1, x1, y1, x2, y2)\r\n  open.enqueue(start)\r\n  while (!open.isEmpty()) {\r\n    const curItem = open.dequeue()\r\n    const { value: { x: cx, y: cy } } = curItem\r\n    close.add('' + cx + cy)\r\n    if (cx === x2 && cy === y2) {\r\n      return _itemLinkToPath(curItem)\r\n    }\r\n\r\n    const neighbors = _getNeighbors(curItem.value.x, curItem.value.y, grid, close)\r\n    for (const { x, y } of neighbors) {\r\n      const exist = open.find((item) => item.value.x === x && item.value.y === y)\r\n      if (exist) {\r\n        const { g, f: fValue } = f(x1, y1, x, y, x2, y2)\r\n        if (g < exist.value.g) {\r\n          exist.value.g = g\r\n          exist.value.f = fValue\r\n          exist.value.parent = curItem\r\n          const existIndex = open.findIndex((item) => item.value.x === x && item.value.y === y)\r\n          open.moveUp(existIndex)\r\n        }\r\n      } else {\r\n        const newItem = _createItem(cx, cy, x, y, x2, y2)\r\n        newItem.parent = curItem\r\n        open.enqueue(newItem)\r\n      }\r\n    }\r\n  }\r\n  return null\r\n}\r\n","import { DIRECTION, INVALID_DIRECTION } from './snake/index.js'\r\n\r\nimport { search } from './aStar.js'\r\nimport { getRandomInt, shuffle } from './utils.js'\r\n\r\n/** 0: accessible, 1: not accessible */\r\nconst ENTITY_TYPES = {\r\n  MAP_WALL: 1,\r\n  MAP_EMPTY: 0,\r\n  SNAKE: 1,\r\n  FOOD: 0\r\n}\r\n\r\n/**\r\n * transform map, snake and food to 2d array\r\n * @param {GameMap} gameMap\r\n * @param {Snake} snake\r\n * @param {Food} food\r\n */\r\nconst serializeEntities = (gameMap, snake, food) => {\r\n  const { rowNums, colNums } = gameMap\r\n  const arr = Array(rowNums + 2)\r\n  for (let i = 0; i < rowNums + 2; i++) {\r\n    arr[i] = Array(colNums + 2)\r\n    if (i === 0 || i === rowNums + 1) {\r\n      arr[i].fill(ENTITY_TYPES.MAP_WALL)\r\n    } else {\r\n      arr[i].fill(ENTITY_TYPES.MAP_EMPTY)\r\n      arr[i][0] = arr[i][colNums + 1] = ENTITY_TYPES.MAP_WALL\r\n    }\r\n  }\r\n\r\n  snake.forEach(el => {\r\n    arr[el.y][el.x] = ENTITY_TYPES.SNAKE\r\n  })\r\n  const { x: tailX, y: tailY } = snake.getTail()\r\n  arr[tailY][tailX] = ENTITY_TYPES.MAP_EMPTY\r\n\r\n  arr[food.y][food.x] = ENTITY_TYPES.FOOD\r\n  return arr\r\n}\r\n\r\n/** direction, [y, x, dir][] */\r\nconst _dir = [\r\n  [-1, 0, DIRECTION.UP],\r\n  [0, 1, DIRECTION.RIGHT],\r\n  [1, 0, DIRECTION.DOWN],\r\n  [0, -1, DIRECTION.LEFT]\r\n]\r\n\r\nconst _getHeadNeighborInfos = (grid, head, tail, food, isTailAccessible) => {\r\n  const { x: headX, y: headY } = head\r\n  const { x: tailX, y: tailY } = tail\r\n  const { x: foodX, y: foodY } = food\r\n  const neighbors = _dir.map(([yOffset, xOffset, dir]) => ({\r\n    x: headX + xOffset,\r\n    y: headY + yOffset,\r\n    dir,\r\n    /** length of path to snake tail */\r\n    tailPathLen: -1,\r\n    /** length of path to food */\r\n    foodPathLen: -1\r\n  }))\r\n  neighbors.forEach(el => {\r\n    if (el.x < 0 || el.y < 0 || el.x >= grid.length || el.y >= grid[0].length ||\r\n      grid[el.y][el.x] === 1) {\r\n      return\r\n    }\r\n\r\n    if (!isTailAccessible && el.x === tailX && el.y === tailY) {\r\n      return\r\n    }\r\n\r\n    const tailPath = search(el.x, el.y, tailX, tailY, grid)\r\n    if (tailPath) {\r\n      el.tailPathLen = tailPath.length - 1\r\n    }\r\n    const foodPath = search(el.x, el.y, foodX, foodY, grid)\r\n    if (foodPath) {\r\n      el.foodPathLen = foodPath.length - 1\r\n    }\r\n  })\r\n  return neighbors\r\n  // const result = neighbors.filter(el => el.tailPathLen !== -1);\r\n  // console.log('neighbors', result);\r\n  // return result;\r\n}\r\n\r\nlet callCnt = 0\r\n\r\nexport const getNextDirection = (gameMap, snake, food, isTailAccessible) => {\r\n  if (callCnt++ > 16) {\r\n    shuffle(_dir)\r\n    callCnt = 0\r\n  }\r\n  const grid = serializeEntities(gameMap, snake, food)\r\n  // console.log(grid);\r\n  const neighborInfos = _getHeadNeighborInfos(grid, snake.getHead(), snake.getTail(), food, isTailAccessible).filter(el => el.tailPathLen !== -1)\r\n  if (snake.length === (gameMap.colNums * gameMap.rowNums - 1)) {\r\n    const target = neighborInfos.find(el => el.x === food.x && el.y === food.y)\r\n    if (target) {\r\n      return target.dir\r\n    }\r\n  } else if (neighborInfos.length === 0) {\r\n    const randomDir = [DIRECTION.UP, DIRECTION.RIGHT, DIRECTION.DOWN, DIRECTION.LEFT]\r\n      .filter(el => el !== INVALID_DIRECTION[snake.direction])[getRandomInt(0, 3)]\r\n    // console.log('random', randomDir, snake.direction);\r\n    return randomDir\r\n  } else {\r\n    let sameDirectionItem\r\n    let minFoodPathLenItem\r\n    let maxTailPathLenItem\r\n    const canGotoTailPositions = neighborInfos.filter(el => el.tailPathLen !== -1)\r\n    for (const info of canGotoTailPositions) {\r\n      if (info.dir === snake.direction) {\r\n        sameDirectionItem = info\r\n      }\r\n      if (info.foodPathLen !== -1 && (!minFoodPathLenItem || info.foodPathLen < minFoodPathLenItem.foodPathLen)) {\r\n        minFoodPathLenItem = info\r\n      }\r\n      if (info.tailPathLen !== -1 && (!maxTailPathLenItem || info.tailPathLen > maxTailPathLenItem.tailPathLen)) {\r\n        maxTailPathLenItem = info\r\n      }\r\n    }\r\n    let result\r\n    if (sameDirectionItem) {\r\n      if (sameDirectionItem === minFoodPathLenItem) {\r\n        result = sameDirectionItem.dir\r\n      } else if (maxTailPathLenItem && snake.length > (gameMap.colNums * gameMap.rowNums / 2)) {\r\n        result = maxTailPathLenItem.dir\r\n      } else if (minFoodPathLenItem && minFoodPathLenItem.foodPathLen <= grid.length / 2) {\r\n        result = minFoodPathLenItem.dir\r\n      } else {\r\n        result = sameDirectionItem.dir\r\n      }\r\n    } else {\r\n      if (maxTailPathLenItem) {\r\n        result = maxTailPathLenItem.dir\r\n      } else if (minFoodPathLenItem) {\r\n        result = minFoodPathLenItem.dir\r\n      } else {\r\n        result = canGotoTailPositions[getRandomInt(0, canGotoTailPositions.length - 1)].dir\r\n      }\r\n    }\r\n    // console.log(result, snake.direction);\r\n    return result\r\n  }\r\n}\r\n","import { MainLoop } from './mainLoop.js'\r\nimport { Renderer } from './renderer.js'\r\nimport { Keyboard } from './keyboard.js'\r\n\r\nimport { GameMap } from './gameMap.js'\r\nimport { Snake, DIRECTION } from './snake/index.js'\r\nimport { Food, TYPE as FOODTYPE } from './food.js'\r\nimport { ResultText } from './resultText.js'\r\n\r\nimport { getRandomInt, isTouchable } from './utils.js'\r\nimport { getNextDirection } from './ai.js'\r\n\r\nconst ROW_NUM = 10\r\nconst COL_NUM = 10\r\nconst PIXEL_SIZE = 4\r\n\r\nconst mainLoop = new MainLoop()\r\n\r\nconst canvas = document.querySelector('#main-canvas')\r\nconst statusBar = document.querySelector('#status-bar')\r\nconst toolBar = document.querySelector('#tool-bar')\r\nconst ctrlBar = document.querySelector('#ctrl-bar')\r\nconst tipsBar = document.querySelector('#tips-bar')\r\nconst btnPause = document.querySelector('#btn-pause')\r\nconst btnRestart = document.querySelector('#btn-restart')\r\nconst btnAI = document.querySelector('#btn-ai')\r\nconst btnJoystickUp = document.querySelector('#btn-joystick-up')\r\nconst btnJoystickLeft = document.querySelector('#btn-joystick-left')\r\nconst btnJoystickRight = document.querySelector('#btn-joystick-right')\r\nconst btnJoystickDown = document.querySelector('#btn-joystick-down')\r\nconst btnDash = document.querySelector('#btn-dash')\r\n\r\ncanvas.width = PIXEL_SIZE * 8 * (COL_NUM + 2)\r\nstatusBar.style.width = canvas.width + 'px'\r\nctrlBar.style.width = canvas.width + 'px'\r\ntoolBar.style.width = canvas.width + 'px'\r\ntipsBar.style.width = canvas.width + 'px'\r\n\r\ncanvas.height = PIXEL_SIZE * 8 * (ROW_NUM + 2)\r\n\r\nif (isTouchable()) {\r\n  ctrlBar.classList.remove('hidden')\r\n} else {\r\n  tipsBar.classList.remove('hidden')\r\n}\r\n\r\nconst setStatusText = (snakeLength) => {\r\n  statusBar.innerHTML = `Length: ${snakeLength}`\r\n}\r\n\r\nconst renderer = new Renderer(canvas)\r\n\r\nconst resultText = new ResultText(0, (ROW_NUM + 2) * PIXEL_SIZE * 8 / 4, {\r\n  width: (COL_NUM + 2) * PIXEL_SIZE * 8,\r\n  height: (ROW_NUM + 2) * PIXEL_SIZE * 8 / 2,\r\n  text: ''\r\n})\r\nresultText.visible = false\r\n\r\nconst gameMap = new GameMap({\r\n  x: 0,\r\n  y: 0,\r\n  rowNums: ROW_NUM,\r\n  colNums: COL_NUM,\r\n  pixelSize: PIXEL_SIZE\r\n})\r\n\r\nlet snake = new Snake({\r\n  length: 3,\r\n  rowNums: ROW_NUM,\r\n  colNums: COL_NUM,\r\n  pixelSize: PIXEL_SIZE\r\n})\r\nsnake.onStatusChanged(setStatusText)\r\nsetStatusText(snake.length, snake.speed)\r\n\r\nconst generateFoodXY = () => {\r\n  let x, y\r\n  do {\r\n    x = getRandomInt(0, gameMap.colNums) + 1\r\n    y = getRandomInt(0, gameMap.rowNums) + 1\r\n  } while (snake.includes(x, y))\r\n\r\n  return [x, y]\r\n}\r\n\r\nconst food = new Food(...generateFoodXY(), PIXEL_SIZE, FOODTYPE.CHERRY)\r\n\r\nconst AI = (options) => {\r\n  const { isTailAccessible } = options\r\n  return getNextDirection(gameMap, snake, food, isTailAccessible)\r\n}\r\n\r\nconst update = (elapsed) => {\r\n  gameMap.update()\r\n  food.update()\r\n  if (snake.length === COL_NUM * ROW_NUM) {\r\n    if (resultText.text !== 'You Win!') {\r\n      resultText.text = 'You Win!'\r\n      resultText.textColor = 'Green'\r\n      resultText.visible = true\r\n    }\r\n  } else if (!snake.isDead()) {\r\n    snake.update(elapsed)\r\n    if (snake.isEat(food)) {\r\n      snake.grow()\r\n      snake.speedUp()\r\n      if (snake.length < COL_NUM * ROW_NUM) {\r\n        [food.x, food.y] = generateFoodXY()\r\n        food.type = [FOODTYPE.APPLE, FOODTYPE.CHERRY, FOODTYPE.BANANA, FOODTYPE.WATERMELON][getRandomInt(0, 4)]\r\n      } else {\r\n        food.visible = false\r\n      }\r\n    }\r\n  } else {\r\n    btnPause.setAttribute('disabled', 'disabled')\r\n    if (resultText.text !== 'YOU DIED') {\r\n      resultText.text = 'YOU DIED'\r\n      resultText.textColor = 'Red'\r\n      resultText.visible = true\r\n    }\r\n  }\r\n}\r\n\r\nconst draw = () => {\r\n  renderer.clear('DarkSeaGreen')\r\n  gameMap.visible && gameMap.draw(renderer)\r\n  food.visible && food.draw(renderer)\r\n  snake.visible && snake.draw(renderer)\r\n  resultText.visible && resultText.draw(renderer)\r\n}\r\n\r\nconst keyW = new Keyboard('KeyW')\r\nconst keyD = new Keyboard('KeyD')\r\nconst keyS = new Keyboard('KeyS')\r\nconst keyA = new Keyboard('KeyA')\r\nconst keyArrowUp = new Keyboard('ArrowUp')\r\nconst keyArrowRight = new Keyboard('ArrowRight')\r\nconst keyArrowLeft = new Keyboard('ArrowLeft')\r\nconst keyArrowDown = new Keyboard('ArrowDown')\r\nconst keySpace = new Keyboard('Space')\r\n\r\nconst checkInput = () => {\r\n  if (keyW.isPressed() || keyArrowUp.isPressed()) {\r\n    snake.changeDirection(DIRECTION.UP)\r\n  } else if (keyD.isPressed() || keyArrowRight.isPressed()) {\r\n    snake.changeDirection(DIRECTION.RIGHT)\r\n  } else if (keyS.isPressed() || keyArrowDown.isPressed()) {\r\n    snake.changeDirection(DIRECTION.DOWN)\r\n  } else if (keyA.isPressed() || keyArrowLeft.isPressed()) {\r\n    snake.changeDirection(DIRECTION.LEFT)\r\n  } else if (keySpace.isPressed()) {\r\n    snake.dash()\r\n  }\r\n}\r\n\r\nbtnJoystickUp.addEventListener('mousedown', () => {snake.changeDirection(DIRECTION.UP) })\r\nbtnJoystickUp.addEventListener('touchstart', () => { snake.changeDirection(DIRECTION.UP) })\r\nbtnJoystickRight.addEventListener('mousedown', () => { snake.changeDirection(DIRECTION.RIGHT) })\r\nbtnJoystickRight.addEventListener('touchstart', () => { snake.changeDirection(DIRECTION.RIGHT) })\r\nbtnJoystickDown.addEventListener('mousedown', () => { snake.changeDirection(DIRECTION.DOWN) })\r\nbtnJoystickDown.addEventListener('touchstart', () => { snake.changeDirection(DIRECTION.DOWN) })\r\nbtnJoystickLeft.addEventListener('mousedown', () => { snake.changeDirection(DIRECTION.LEFT) })\r\nbtnJoystickLeft.addEventListener('touchstart', () => { snake.changeDirection(DIRECTION.LEFT) })\r\nbtnDash.addEventListener('mousedown', () => { snake.dash() })\r\nbtnDash.addEventListener('touchstart', () => { snake.dash() })\r\n\r\nlet isPaused = false\r\nlet isEnableAI = false\r\n\r\nconst restart = () => {\r\n  snake = new Snake({\r\n    length: 3,\r\n    rowNums: ROW_NUM,\r\n    colNums: COL_NUM,\r\n    pixelSize: PIXEL_SIZE\r\n  })\r\n  snake.onStatusChanged(setStatusText)\r\n  setStatusText(snake.length, snake.speed);\r\n  [food.x, food.y] = generateFoodXY()\r\n  food.type = [FOODTYPE.APPLE, FOODTYPE.CHERRY, FOODTYPE.BANANA, FOODTYPE.WATERMELON][getRandomInt(0, 4)]\r\n  food.visible = true\r\n\r\n  if (isEnableAI) {\r\n    snake.beforeMove = AI\r\n  }\r\n\r\n  resultText.text = ''\r\n  resultText.visible = false\r\n}\r\n\r\nbtnRestart.addEventListener('click', () => {\r\n  restart()\r\n  btnPause.removeAttribute('disabled')\r\n  btnRestart.blur()\r\n})\r\n\r\nbtnPause.addEventListener('click', () => {\r\n  isPaused = !isPaused\r\n  if (isPaused) {\r\n    btnRestart.setAttribute('disabled', 'disabled')\r\n    btnPause.innerHTML = 'Resume'\r\n    resultText.text = 'Paused'\r\n    resultText.textColor = 'White'\r\n    resultText.visible = true\r\n  } else {\r\n    btnRestart.removeAttribute('disabled')\r\n    btnPause.innerHTML = 'Pause'\r\n    resultText.text = ''\r\n    resultText.visible = false\r\n  }\r\n  btnPause.blur()\r\n})\r\n\r\nbtnAI.addEventListener('click', () => {\r\n  isEnableAI = !isEnableAI\r\n  if (isEnableAI) {\r\n    snake.beforeMove = AI\r\n    btnAI.classList.add('btn-ctrl-enable')\r\n  } else {\r\n    snake.beforeMove = null\r\n    btnAI.classList.remove('btn-ctrl-enable')\r\n  }\r\n  btnAI.blur()\r\n})\r\n\r\nconst main = () => {\r\n  mainLoop.setOnLoop((elapsed) => {\r\n    if (!isPaused) {\r\n      checkInput()\r\n      update(elapsed)\r\n    }\r\n    draw()\r\n  })\r\n  mainLoop.start()\r\n}\r\n\r\nmain()\r\n","export class Renderer {\r\n  constructor (canvas) {\r\n    this.canvas = canvas\r\n    this.ctx = canvas.getContext('2d')\r\n  }\r\n\r\n  clear (fillColor) {\r\n    if (!fillColor) {\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n    } else {\r\n      this.ctx.save()\r\n      this.ctx.fillStyle = fillColor\r\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\r\n      this.ctx.restore()\r\n    }\r\n  }\r\n\r\n  drawRect (x, y, width, height, color) {\r\n    const { ctx } = this\r\n    ctx.save()\r\n    ctx.fillStyle = color\r\n    ctx.fillRect(x, y, width, height)\r\n    ctx.restore()\r\n  }\r\n\r\n  drawCircle (x, y, radius, color) {\r\n    const { ctx } = this\r\n    ctx.save()\r\n    ctx.fillStyle = color\r\n    ctx.beginPath()\r\n    ctx.arc(x, y, radius, 0, 2 * Math.PI)\r\n    ctx.fill()\r\n    ctx.restore()\r\n  }\r\n\r\n  drawText (x, y, text, color, font) {\r\n    const { ctx } = this\r\n    ctx.save()\r\n    ctx.textAlign = 'left'\r\n    ctx.textBaseline = 'top'\r\n    ctx.font = font\r\n    ctx.fillStyle = color\r\n    ctx.fillText(text, x, y)\r\n    ctx.restore()\r\n  }\r\n\r\n  measureText (text, font) {\r\n    const { ctx } = this\r\n    ctx.save()\r\n    ctx.font = font\r\n    const textMetrics = ctx.measureText(text)\r\n    ctx.restore()\r\n\r\n    const width = textMetrics.width\r\n    const height = textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent\r\n\r\n    return { width, height }\r\n  }\r\n}\r\n","import { GameObject } from './gameObject.js'\r\n\r\nexport class ResultText extends GameObject {\r\n  constructor (x, y, options) {\r\n    super(x, y)\r\n\r\n    const { width, height, text, textColor } = options\r\n\r\n    this.width = width\r\n    this.height = height\r\n    this.text = text\r\n    this.textColor = textColor || 'White'\r\n\r\n    this.font = `${height / 5}px sans-serif`\r\n  }\r\n\r\n  draw (renderer) {\r\n    renderer.drawRect(this.x, this.y, this.width, this.height, '#8fbc8fcc')\r\n    const { width: realWidth } = renderer.measureText(this.text, this.font)\r\n    renderer.drawText(this.x + (this.width - realWidth) / 2, this.y + this.height / 5 * 2, this.text, this.textColor, this.font)\r\n  }\r\n}\r\n"],"names":["KEY_STATUS","keyStatus","window","addEventListener","event","code","Keyboard","static","key","constructor","this","isPressed","isReleased","GameObject","x","y","visible","update","draw","renderer","getRandomInt","min","max","Math","ceil","floor","random","isTouchable","navigator","maxTouchPoints","LP2RP","pixelSize","COLORS","PIXEL_DATAS","TREE","OAK","DIRECTION","UP","RIGHT","DOWN","LEFT","INVALID_DIRECTION","directionValues","HORIZONTAL_PIXEL_DATAS","VERTICAL_PIXEL_DATAS","SnakeBody","HORIZONTAL","VERTICAL","LEFTTOP","RIGHTTOP","LEFTBOTTOM","RIGHTBOTTOM","TYPES","type","super","pixelData","_getPixelData","r","length","c","drawRect","_getColor","colorType","SnakeHead","SnakeTail","EventEmitter","events","eventName","callback","push","removeEventListener","filter","cb","on","off","once","onceCallback","emit","args","forEach","MAX_SPEED","ListNode","value","prev","next","Snake","config","rowNums","colNums","direction","speed","beforeMove","head","tail","i","_elapsed","_canGrow","_directionQueue","_lastDirection","_eventEmitter","_dash","elapsed","aiSpeed","isTailAccessible","shift","_doGrow","move","node","p","ENDPOINT_TYPES","includes","ENDPOINT_TYPES_TO_TYPES","_calcTailType","DIRECTION_TO_TYPE","dash","setTimeout","tailPrev","grow","toString","str","changeDirection","lastDirection","speedUp","speedDown","isEat","food","isDead","headX","headY","onStatusChanged","getHead","getTail","Item","PriorityQueue","arr","heap","_initHeap","enqueue","item","moveUp","dequeue","top","isEmpty","last","pop","unshift","moveDown","find","findIndex","map","join","swap","j","index","parent","lastNoLeaf","left","right","maxIndex","h","x1","y1","x2","y2","v","abs","getManhattanDistance","f","sx","sy","cx","cy","tx","ty","g","hValue","_createItem","fValue","_dir","_getNeighbors","grid","close","yOffset","xOffset","has","_itemLinkToPath","path","search","open","Set","start","curItem","add","neighbors","exist","existIndex","newItem","callCnt","mainLoop","loopStatus","onLoop","lastTimeStamp","setOnLoop","loop","timestamp","requestAnimationFrame","bind","performance","now","pause","stop","canvas","document","querySelector","statusBar","toolBar","ctrlBar","tipsBar","btnPause","btnRestart","btnAI","btnJoystickUp","btnJoystickLeft","btnJoystickRight","btnJoystickDown","btnDash","width","PIXEL_SIZE","style","height","classList","remove","setStatusText","snakeLength","innerHTML","ctx","getContext","clear","fillColor","save","fillStyle","fillRect","restore","clearRect","color","drawCircle","radius","beginPath","arc","PI","fill","drawText","text","font","textAlign","textBaseline","fillText","measureText","textMetrics","actualBoundingBoxAscent","actualBoundingBoxDescent","resultText","options","textColor","realWidth","gameMap","_treeTypeArr","Array","_drawTrees","_drawCell","rx","ry","typeIndex","snake","generateFoodXY","AI","shuffle","el","tailX","tailY","serializeEntities","neighborInfos","foodX","foodY","dir","tailPathLen","foodPathLen","tailPath","foodPath","_getHeadNeighborInfos","sameDirectionItem","minFoodPathLenItem","maxTailPathLenItem","canGotoTailPositions","info","result","target","getNextDirection","keyW","keyD","keyS","keyA","keyArrowUp","keyArrowRight","keyArrowLeft","keyArrowDown","keySpace","isPaused","isEnableAI","removeAttribute","blur","setAttribute","COL_NUM"],"sourceRoot":""}